<div>
  <div style="display: flex" *ngIf="scheduleService.schedule">
    <div class="edit" *ngIf="isEditMode">
      <div class="edit-control">
        <input type="text" class="form-control edit-input" [(ngModel)]="templatesFilter">
        <button type="button" class="btn btn-light" (click)="add()">Add</button>
      </div>
      <div *ngFor="let subject of templateSubjects" (click)="add(subject)">
        <app-schedule-subject *ngIf="templateFilter(templatesFilter, subject)" [subject]="subject"
                              style="width: 180px" [topCorner]="true" [bottomCorner]="true"></app-schedule-subject>
      </div>
      <div class="edit-control-footer">
        <button type="button" class="btn btn-light" (click)="confirmEdit()">Confirm</button>
      </div>
    </div>
    <div class="schedule-wrapper">
      <div style="display:flex;">
        <div class="time-container" [style.height]="maxHeight + 'px'">
          <div *ngFor="let time of scheduleService.schedule.info.times.toArray()">
            <p class="time" [style.top]="yTime(time) - 20 + 'px'">{{time.format("hh:mm A")}}</p>
            <hr class="time-line" [style.top]="yTime(time) + 'px'">
          </div>
        </div>
        <div>
          <div class="weekdays-container">
            <div *ngFor="let i of days">
              <p class="weekday" [style.left]="200 * i + 'px'" [style.width]="180 + 'px'">{{weekDays[i % 7]}}</p>
            </div>
          </div>
          <div class="lessons-container" [style.height]="maxHeight + 'px'">
            <div *ngFor="let lesson of scheduleService.schedule.lessons" class="event"
                 [style.top.px]="y(lesson)"
                 [style.left.px]="x(lesson)"
                 [style.width.px]="width(lesson)"
                 [style.height.px]="height(lesson)">
              <app-schedule-cell [lesson]="lesson" [height]="height(lesson)"
                                 [isEditMode]="isEditMode"></app-schedule-cell>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <button (click)="isEditMode = !isEditMode">Edit</button>
</div>

<div *ngIf="addSubject" class="dialog">
  <app-add-subject-dialog class="add-subject-dialog" [templateSubject]="selectedSubject"
                          [maxDate]="maxDate"></app-add-subject-dialog>
</div>
